# android-free-searchable-music-player

## overview

*Public Domain.*

By 2 conditions of inclusion and exclusion of the "Regular Expression", this appli searches and plays music files in android device.

---

## 概要

　*パブリック ドメインです。*

　(音楽を含む)音声ファイルを文字パターン「正規表現」による(含有)検索条件と除外条件で曲名、アーティスト名、アルバム名、ファイルのパスを検索できるアンドロイド スマホのミュージック プレイヤー アプリ(プレイリスト機能無し)です。

　検索条件、除外条件、曲名、アーティスト名、アルバム名、ファイルのパスの全角英大文字(Ａなど)、全角英小文字(ａなど)、半角英大文字(Aなど)を半角英小文字(aなど)に置換してから文字を比較します。

　「正規表現」とは、プログラミング言語などで少しの違いが有りますが、大体、共通している、文字パターンの書き方です。

## 特徴

　広告、無いです。

　アプリ内課金、無いです。

　Bluetoothイヤホンで聴く事ができますし、一時停止や次の曲への移動や音量の増減などの操作もできます。

　電話が、かかってきた時に、当アプリを一時停止して、通話が終了したら、当アプリの音楽の再生を再開します。

　現在、再生している分と秒を表示します。

　バック グラウンド再生できます。

　有線イヤホンが抜けた時に音楽の再生を一時停止します。

　Bluetoothイヤホンで、31分以上バック グラウンド再生しましたが、問題無かったです。

　有線イヤホンのバック グラウンド再生は、スマホを再起動した直後は、正常に動作しますが、しばらくスマホを使用していると、スリープされてしまいました。もしかしたら、バック グラウンド処理の優先度の設定が必要なのかもしれませんが、現時点では不明です。

## インストール方法

　.apkファイルをアンドロイド スマホやタブレットにダウンロードしてインストールします。

## 使用方法

　音楽ファイルの検索画面で検索ボタンを押すと、音楽ファイルの一覧画面が表示されます。

　音楽ファイルの一覧画面で、音楽ファイルの情報をタップすると、タップされた音楽ファイルの詳細画面が表示されて、音楽を再生する「フォア グラウンド サービス」がアンドロイドの通知に表示されます。

　音楽ファイルの詳細画面で再生ボタンを押すと、音楽が再生されます。

　音楽ファイルの詳細画面で閉じるボタンを押すと、音楽が停止し、音楽を再生する「フォア グラウンド サービス」が終了されてアンドロイドの通知から消えます。

## 不具合

　通知の管理で通知をオフにすると、通知が表示されなく成ります。

　ただし、通知が表示されている時に通知をオフにすると、AQUOS sense3ではIndexOutOfBoundsExceptionが発生します。FireHD8Plus(第10世代)ではアプリケーションが強制終了されます。

　しかし、アプリを起動し直すと、問題無く動きます。

<br />

　音楽再生中に、アプリの画面をスワイプして消して、ホーム画面のアプリのアイコンを押して、アプリの画面を呼ぶと、onStart()やonResume()が呼ばれずに画面が復元されるようで、再生中の音楽とは違う音楽ファイルの情報が表示されてしまいます。

　ただし、その後、画面を非表示にして再表示すると、再生中の音楽が画面に反映されます。

<br />

　再生しようとした音楽ファイルが削除されていて読み取れない場合は、アマゾンのタブレットのFireHD8Plus(第10世代)では、音楽ファイルの詳細画面が終了されて、音楽ファイルの一覧画面が表示されて、最新の状態の音楽ファイルの一覧が表示されました。


## アンドロイドのスマホのアプリ開発初心者へのアドバイス

　build.gradleを変更後に、Android Studioで「Sync now」をクリックしないと、Android Studioは「androidx.media」パッケージを認識してくれません。

　build.gradleは少なくとも2つ有るので、そのうち、「dependencies」ブロックが有る適切な1つだけを変更します。
